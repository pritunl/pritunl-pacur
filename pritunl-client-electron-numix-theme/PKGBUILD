targets=(
    "archlinux"
    "amazonlinux-2"
    "centos-7"
    "centos-8"
    "debian-jessie"
    "debian-stretch"
    "debian-buster"
    "fedora-32"
    "fedora-33"
    "oraclelinux-7"
    "oraclelinux-8"
    "ubuntu-xenial"
    "ubuntu-bionic"
    "ubuntu-disco"
    "ubuntu-eoan"
    "ubuntu-focal"
)
pkgname="pritunl-client-electron-numix-theme"
pkgver="1.0.2418.61"
pkgrel="1"
pkgdesc="Pritunl OpenVPN Electron Client Numix Theme"
pkgdesclong=(
    "Numix icons for Pritunl Electron Client"
)
maintainer="Pritunl <contact@pritunl.com>"
arch="amd64"
license=("custom")
section="utils"
priority="optional"
url="https://github.com/pritunl/pritunl-client-electron"
provides=("${pkgname}")
conflicts=("${pkgname}")
sources=(
    "${url}/archive/${pkgver}.tar.gz"
)
hashsums=(
    "f9d818d64694d5d9fbe8c273b804bf9d36ee95a44e973bc9767ce80049c0a2f5"
)

package:pacman() {
    cd "${srcdir}/pritunl-client-electron-${pkgver}"

    mkdir -p ${pkgdir}/usr/share
    mv resources_linux/numix_icons ${pkgdir}/usr/share/icons
    find ${pkgdir}/usr/share/icons -type d -exec chmod 755 {} \;
    find ${pkgdir}/usr/share/icons -type f -exec chmod 644 {} \;
}
package:yum() {
    cd "${srcdir}/pritunl-client-electron-${pkgver}"

    mkdir -p ${pkgdir}/usr/share
    mv resources_linux/numix_icons ${pkgdir}/usr/share/icons
    find ${pkgdir}/usr/share/icons -type d -exec chmod 755 {} \;
    find ${pkgdir}/usr/share/icons -type f -exec chmod 644 {} \;
}
package:apt() {
    cd "${srcdir}/pritunl-client-electron-${pkgver}"

    mkdir -p ${pkgdir}/usr/share
    mv resources_linux/numix_icons ${pkgdir}/usr/share/icons
    find ${pkgdir}/usr/share/icons -type d -exec chmod 755 {} \;
    find ${pkgdir}/usr/share/icons -type f -exec chmod 644 {} \;
}

postinst() {
    gtk-update-icon-cache -q -t -f /usr/share/icons/Numix-Square &> /dev/null || true
    gtk-update-icon-cache -q -t -f /usr/share/icons/Numix-Square-Light &> /dev/null || true
    xdg-icon-resource forceupdate --theme Numix-Square &> /dev/null || true
    xdg-icon-resource forceupdate --theme Numix-Square-Light &> /dev/null || true
    update-desktop-database -q || true
}

postrm() {
    gtk-update-icon-cache -q -t -f /usr/share/icons/Numix-Square &> /dev/null || true
    gtk-update-icon-cache -q -t -f /usr/share/icons/Numix-Square-Light &> /dev/null || true
    xdg-icon-resource forceupdate --theme Numix-Square &> /dev/null || true
    xdg-icon-resource forceupdate --theme Numix-Square-Light &> /dev/null || true
    update-desktop-database -q || true
}
